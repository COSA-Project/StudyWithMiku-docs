{"version":3,"file":"277-ca055b.js","mappings":"mXAGMA,EAAwB,oBAAXC,OAAyB,KAAOA,OAC7CC,EAAa,WAAH,YACgB,IAA3BF,EAAeG,QACTH,EAAeG,aACgB,IAA/BH,EAAeI,YACZ,EACCJ,EAAeI,WAAW,EAazC,QAX+B,WAAqB,IAApBC,EAAGC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,GAElCG,GAAkCC,EAAAA,EAAAA,WAAS,kBAAMR,GAAY,IAACS,EAAAC,IAAAH,EAAA,GAAvDI,EAASF,EAAA,GAAEG,EAAYH,EAAA,GAExBI,GAAkBC,EAAAA,EAAAA,KAAY,WAChCF,EAAaZ,IACjB,GAAGG,GAEH,OADAY,EAAAA,EAAAA,IAASjB,EAAK,SAAUe,GACjBF,CACX,ECpBA,IAAIK,EACJ,SAASC,IAAiS,OAApRA,EAAWC,OAAOC,OAASD,OAAOC,OAAOC,OAAS,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIlB,UAAUC,OAAQiB,IAAK,CAAE,IAAIC,EAASnB,UAAUkB,GAAI,IAAK,IAAIE,KAAOD,EAAcL,OAAOO,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQH,EAAOG,GAAOD,EAAOC,GAAU,CAAE,OAAOH,CAAQ,EAAUJ,EAASW,MAAMC,KAAMzB,UAAY,CAElV,IAAI0B,EAAW,SAAkBC,GAC/B,OAAoB,gBAAoB,MAAOd,EAAS,CACtDe,UAAW,kBACXC,QAAS,gBACTC,MAAO,6BACPC,MAAO,IACPC,OAAQ,KACPL,GAAQf,IAAUA,EAAqB,gBAAoB,OAAQ,CACpEqB,EAAG,wVAEP,E,6lBCGA,IAAMC,EAAW,SAAHC,GAAyD,IAA3CC,EAAOD,EAAPC,QAASC,EAAQF,EAARE,SAAUC,EAAOH,EAAPG,QACrCC,GAAOC,EAAAA,EAAAA,KAAA,KAAGF,QAASA,EAAOD,SAAGA,IAEnC,GAAID,EAAS,CACT,IAOIT,EAPEc,EAAe,CACjBC,UAAW,OACXC,oBAAqB,SAACC,GAClB,OAAOA,EAAIC,eAAiBC,SAASC,IACzC,GAYJ,OAPIpB,EADmB,WAAnBqB,IAAOZ,IAAwBA,EAAQd,eAAe,WAC9Cc,EAEA,CACJa,QAASb,IAIVI,EAAAA,EAAAA,KAACU,EAAAA,EAAOC,EAAAA,EAAAA,EAAA,GACPV,GACAd,GAAK,IAAAU,SAERE,I,CAIT,OAAOA,CACX,EAOc,SAAUa,EAAIC,GAAyB,IAAtBzB,EAASyB,EAATzB,UAI3B,MAAa,YAFA0B,EAAAA,EAAAA,KAGF,MAGJC,EAAAA,EAAAA,MAACC,EAAS,CAAC5B,UAAWA,EAASS,SAAA,EAClCG,EAAAA,EAAAA,KAACiB,EAAS,KACVjB,EAAAA,EAAAA,KAACkB,EAAAA,GAAoB,CAACC,KAAM,iBAAkBC,UAAW1B,MAEjE,CAEA,IAAMsB,EAAYK,EAAAA,GAAAA,IAAUC,IAAAA,EAAAC,IAAA,kxBAsCtBN,EAAY,WAEd,IAAMO,GAAOC,EAAAA,EAAAA,MAEPC,GAAWC,EAAAA,EAAAA,cAAY,WACzB,IAAMC,EAAQtB,SAASuB,gBACnBC,EAAUF,EAAM7D,WAAa6D,EAAMG,WAAa,GAEhDD,EAAU,IACV3E,OAAO6E,SAAS,EAAGF,EAAU,IAC7BG,WAAWP,EAAU,GAE7B,GAAG,IAIH,OAFkBQ,IAEF,KACLlC,EAAAA,EAAAA,KAACN,EAAQ,CACZE,QAAS4B,EAAKW,cACV,CAAAC,GAAA,SAAEC,eAAgB,CAAF,yBAEpBvC,QAAS4B,EAAQ7B,UACpBG,EAAAA,EAAAA,KAACsC,EAAS,MAER,IACX,C","sources":["webpack://@topwrite/reader/./src/lib/use-window-scroll.ts","webpack://@topwrite/reader/./src/images/gotop.svg","webpack://@topwrite/reader/./src/components/menu.tsx"],"sourcesContent":["import { useThrottle, useEvent } from '@topwrite/common';\r\nimport { useState } from 'react';\r\n\r\nconst win = typeof window === 'undefined' ? null : window;\r\nconst getScrollY = (): number =>\r\n    (win as Window).scrollY !== void 0\r\n        ? (win as Window).scrollY\r\n        : (win as Window).pageYOffset === void 0\r\n            ? 0\r\n            : (win as Window).pageYOffset;\r\n\r\nexport const useWindowScroll = (fps = 30): number => {\r\n\r\n    const [scrollTop, setScrollTop] = useState(() => getScrollY());\r\n\r\n    const updateScrollTop = useThrottle(() => {\r\n        setScrollTop(getScrollY());\r\n    }, fps);\r\n    useEvent(win, 'scroll', updateScrollTop);\r\n    return scrollTop;\r\n};\r\n\r\nexport default useWindowScroll;\r\n","var _path;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nvar SvgGotop = function SvgGotop(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    className: \"gotop_svg__icon\",\n    viewBox: \"0 0 1024 1024\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 200,\n    height: 200\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M484.539 297.401 78.509 703.407c-11.785 11.813-11.785 30.912 0 42.724 11.816 11.815 30.94 11.815 42.757 0L507.477 359.95l379.83 379.806c11.455 11.483 30.04 11.483 41.493 0 11.51-11.454 11.51-30.039 0-41.516L534.373 303.777c-1.544-1.54-3.418-2.297-5.2-3.413-.693-.935-1.056-2.086-1.934-2.963-11.784-11.784-30.912-11.784-42.695 0h-.005zm0 0\"\n  })));\n};\nexport { SvgGotop as ReactComponent };\nexport default \"data:image/svg+xml;base64,PHN2ZyB0PSIxNjU2NTc2OTMwMTg2IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjIzOTMiIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48cGF0aCBkPSJNNDg0LjUzODU1NSAyOTcuNDAxNDM0IDc4LjUwODA1MiA3MDMuNDA3Mzc4Yy0xMS43ODQzOTQgMTEuODEzMDQ3LTExLjc4NDM5NCAzMC45MTIwMzQgMCA0Mi43MjQwNTcgMTEuODE3MTQgMTEuODE0MDcgMzAuOTQxNzEgMTEuODE0MDcgNDIuNzU3ODI2IDBsMzg2LjIxMTEwOS0zODYuMTgxNDMzIDM3OS44MzA3OTUgMzc5LjgwNjIzNWMxMS40NTM4NjYgMTEuNDgyNTE5IDMwLjAzOTE1MyAxMS40ODI1MTkgNDEuNDkxOTk2IDAgMTEuNTExMTcxLTExLjQ1Mzg2NiAxMS41MTExNzEtMzAuMDM5MTUzIDAtNDEuNTE2NTU2TDUzNC4zNzI1NDMgMzAzLjc3NjYzMWMtMS41NDMxNDYtMS41MzkwNTMtMy40MTc4NDMtMi4yOTYyOTktNS4yMDA0NDItMy40MTI3MjYtMC42OTE3NTUtMC45MzUzMDItMS4wNTUwMjktMi4wODU0OTgtMS45MzMwMjUtMi45NjI0NzEtMTEuNzg0Mzk0LTExLjc4NDM5NC0zMC45MTIwMzQtMTEuNzg0Mzk0LTQyLjY5NTQwNSAwTDQ4NC41Mzg1NTUgMjk3LjQwMTQzNHpNNDg0LjUzODU1NSAyOTcuNDAxNDM0IiBwLWlkPSIyMzk0Ij48L3BhdGg+PC9zdmc+DQo=\";","import { InjectedComponentSet, styled, useIntl } from '@topwrite/common';\r\nimport { ComponentProps, ReactNode, useCallback } from 'react';\r\nimport useWindowScroll from '../lib/use-window-scroll';\r\nimport { ReactComponent as GotopIcon } from '../images/gotop.svg';\r\nimport Tooltip from 'rc-tooltip';\r\nimport 'rc-tooltip/assets/bootstrap.css';\r\nimport useWindowSize from '../lib/use-window-size';\r\n\r\ntype TooltipProps = ComponentProps<typeof Tooltip>;\r\n\r\nexport interface MenuItemProps {\r\n    tooltip?: TooltipProps['overlay'] | TooltipProps;\r\n    children: ReactNode;\r\n    onClick?: () => void;\r\n}\r\n\r\nconst MenuItem = function({ tooltip, children, onClick }: MenuItemProps) {\r\n    const item = <a onClick={onClick}>{children}</a>;\r\n\r\n    if (tooltip) {\r\n        const defaultProps = {\r\n            placement: 'left',\r\n            getTooltipContainer: (dom) => {\r\n                return dom.parentElement || document.body;\r\n            }\r\n        };\r\n\r\n        let props: TooltipProps;\r\n        if (typeof tooltip === 'object' && tooltip.hasOwnProperty('overlay')) {\r\n            props = tooltip as TooltipProps;\r\n        } else {\r\n            props = {\r\n                overlay: tooltip\r\n            };\r\n        }\r\n\r\n        return <Tooltip\r\n            {...defaultProps}\r\n            {...props}\r\n        >\r\n            {item}\r\n        </Tooltip>;\r\n    }\r\n\r\n    return item;\r\n};\r\n\r\n\r\nexport interface MenuProps {\r\n    className?: string;\r\n}\r\n\r\nexport default function Menu({ className }: MenuProps) {\r\n\r\n    const size = useWindowSize();\r\n\r\n    if (size === 'mobile') {\r\n        return null;\r\n    }\r\n\r\n    return <Container className={className}>\r\n        <GotopItem />\r\n        <InjectedComponentSet role={'page:menu:item'} component={MenuItem} />\r\n    </Container>;\r\n}\r\n\r\nconst Container = styled.div`\r\n\r\n  position: fixed;\r\n  right: 24px;\r\n  bottom: 48px;\r\n  z-index: 400;\r\n  display: flex;\r\n  flex-direction: column-reverse;\r\n\r\n  a {\r\n    width: 42px;\r\n    height: 42px;\r\n    background: #FFFFFF;\r\n    box-shadow: 0 1px 4px -2px rgb(0 0 0 / 13%), 0 2px 8px rgb(0 0 0 / 8%), 0 8px 16px 4px rgb(0 0 0 / 4%);\r\n    border-radius: 50%;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-around;\r\n    cursor: pointer;\r\n    margin-top: 16px;\r\n    color: #585a5a;\r\n\r\n    svg {\r\n      width: 20px;\r\n      height: 20px;\r\n      fill: currentColor;\r\n    }\r\n\r\n    html[data-theme=dark] & {\r\n      background-color: #1a1a1a;\r\n      color: #e8e8e8;\r\n      border: 1px solid rgba(235, 235, 235, 0.15);\r\n      box-shadow: 0 6px 12px 0 rgba(0, 0, 0, 0.24);\r\n    }\r\n  }\r\n\r\n`;\r\n\r\nconst GotopItem = function() {\r\n\r\n    const intl = useIntl();\r\n\r\n    const scrollUp = useCallback(() => {\r\n        const frame = document.documentElement;\r\n        let pageTop = frame.scrollTop - (frame.clientTop || 0);\r\n\r\n        if (pageTop > 0) {\r\n            window.scrollTo(0, pageTop - 30);\r\n            setTimeout(scrollUp, 2);\r\n        }\r\n    }, []);\r\n\r\n    const scrollTop = useWindowScroll();\r\n\r\n    if (scrollTop > 500) {\r\n        return <MenuItem\r\n            tooltip={intl.formatMessage(\r\n                { defaultMessage: `回到顶部` }\r\n            )}\r\n            onClick={scrollUp}\r\n        ><GotopIcon /></MenuItem>;\r\n    }\r\n    return null;\r\n};\r\n"],"names":["win","window","getScrollY","scrollY","pageYOffset","fps","arguments","length","undefined","_useState","useState","_useState2","_slicedToArray","scrollTop","setScrollTop","updateScrollTop","useThrottle","useEvent","_path","_extends","Object","assign","bind","target","i","source","key","prototype","hasOwnProperty","call","apply","this","SvgGotop","props","className","viewBox","xmlns","width","height","d","MenuItem","_ref","tooltip","children","onClick","item","_jsx","defaultProps","placement","getTooltipContainer","dom","parentElement","document","body","_typeof","overlay","Tooltip","_objectSpread","Menu","_ref2","useWindowSize","_jsxs","Container","GotopItem","InjectedComponentSet","role","component","styled","_templateObject","_taggedTemplateLiteral","intl","useIntl","scrollUp","useCallback","frame","documentElement","pageTop","clientTop","scrollTo","setTimeout","useWindowScroll","formatMessage","id","defaultMessage","GotopIcon"],"sourceRoot":""}