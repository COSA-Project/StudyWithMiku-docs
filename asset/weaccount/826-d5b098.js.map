{"version":3,"file":"826-d5b098.js","mappings":"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","sources":["webpack://TopWritePlugins.weaccount/./src/images/icon.svg","webpack://TopWritePlugins.weaccount/./src/utils/computed-style-to-inline-style.ts","webpack://TopWritePlugins.weaccount/./src/utils/api.ts","webpack://TopWritePlugins.weaccount/./src/images/img.png","webpack://TopWritePlugins.weaccount/./src/images/check.svg","webpack://TopWritePlugins.weaccount/./.topwrite/use-config.ts","webpack://TopWritePlugins.weaccount/./src/components/sync-modal.tsx","webpack://TopWritePlugins.weaccount/./src/utils/base64-to-blob.ts","webpack://TopWritePlugins.weaccount/./src/components/plugin.tsx","webpack://TopWritePlugins.weaccount/./src/components/activate.tsx"],"sourcesContent":["var _path;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nvar SvgIcon = function SvgIcon(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    className: \"icon_svg__icon\",\n    viewBox: \"0 0 1024 1024\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 18,\n    height: 18\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M118.438 395.821c2.369-6.149 33.678 183.946 178.428 278.972l-15.978 88.06c40.236 1.303 78.704-16.536 103.663-48.072l-.086-.086c84.842 23.606 196.817 17.2 343.246-47.298 0 0-43.24 143.184-125.283 194.781-152.07 95.37-391.61 50.738-483.258-107.495-26.056-44.976-68.305-170.702-.732-358.862zm624.476-100.788c148.088 53.771 229.99 212.072 188.204 363.764-14.73 49.792-44.489 149.376-227.525 229.61-9.82 4.386 293.331-368.45-161.674-588.472a367.37 367.37 0 0 1 200.995-4.902zm49.484-62.69c6.89 8.34-416.676-105.991-518.918 322.485v-.215l-.1-.113c-3.226-3.672-83.855-96.422-80.479-191.444C211.493 203.351 345.881 82.208 506.905 80c52.068 0 156.248 0 285.493 152.342z\",\n    fill: \"#1FC372\"\n  })));\n};\nexport { SvgIcon as ReactComponent };\nexport default \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiINCiAgICAgICAgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHQ9IjE2Nzk1NTY3OTE2ODUiIGNsYXNzPSJpY29uIiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyINCiAgICAgcC1pZD0iMTQ4ODIiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTgiIGhlaWdodD0iMTgiPg0KICAgIDxwYXRoIGQ9Ik0xMTguNDM4IDM5NS44MjFjMi4zNjktNi4xNDkgMzMuNjc4IDE4My45NDYgMTc4LjQyOCAyNzguOTcybC0xNS45NzggODguMDZjNDAuMjM2IDEuMzAzIDc4LjcwNC0xNi41MzYgMTAzLjY2My00OC4wNzJsLTAuMDg2LTAuMDg2Yzg0Ljg0MiAyMy42MDYgMTk2LjgxNyAxNy4yIDM0My4yNDYtNDcuMjk4IDAgMC00My4yNCAxNDMuMTg0LTEyNS4yODMgMTk0Ljc4MS0xNTIuMDcgOTUuMzctMzkxLjYxIDUwLjczOC00ODMuMjU4LTEwNy40OTUtMjYuMDU2LTQ0Ljk3Ni02OC4zMDUtMTcwLjcwMi0wLjczMi0zNTguODYyeiBtNjI0LjQ3Ni0xMDAuNzg4YzE0OC4wODggNTMuNzcxIDIyOS45OSAyMTIuMDcyIDE4OC4yMDQgMzYzLjc2NC0xNC43MyA0OS43OTItNDQuNDg5IDE0OS4zNzYtMjI3LjUyNSAyMjkuNjEtOS44MiA0LjM4NiAyOTMuMzMxLTM2OC40NS0xNjEuNjc0LTU4OC40NzJhMzY3LjM3IDM2Ny4zNyAwIDAgMSAyMDAuOTk1LTQuOTAyeiBtNDkuNDg0LTYyLjY5YzYuODkgOC4zNC00MTYuNjc2LTEwNS45OTEtNTE4LjkxOCAzMjIuNDg1di0wLjIxNWwtMC4xLTAuMTEzYy0zLjIyNi0zLjY3Mi04My44NTUtOTYuNDIyLTgwLjQ3OS0xOTEuNDQ0QzIxMS40OTMgMjAzLjM1MSAzNDUuODgxIDgyLjIwOCA1MDYuOTA1IDgwYzUyLjA2OCAwIDE1Ni4yNDggMCAyODUuNDkzIDE1Mi4zNDJ6Ig0KICAgICAgICAgIGZpbGw9IiMxRkMzNzIiIHAtaWQ9IjE0ODgzIj48L3BhdGg+DQo8L3N2Zz4NCg==\";","const computeDefaultBorder = (direction: string) => {\r\n    return (value, computedStyle) => {\r\n        if (computedStyle.getPropertyValue(`border-${direction}-width`) === '0px') {\r\n            return value;\r\n        }\r\n    };\r\n};\r\n\r\ntype StyleList = {\r\n    [key: string]: string | ((value: string, computedStyle: CSSStyleDeclaration, element: Element) => (() => string) | string | undefined) | undefined;\r\n}\r\n\r\nconst STYLE_LIST: StyleList = {\r\n    'background': undefined,\r\n    'background-color': 'rgba(0, 0, 0, 0)',\r\n    'background-image': 'none',\r\n    'color': (_, __, element) => {\r\n        if (element.tagName === 'CODE') {\r\n            return undefined;\r\n        }\r\n        return 'rgb(51, 51, 51)';\r\n    },\r\n    'font-family': (value, _, element) => {\r\n        if (['div', 'article', 'section', 'blockquote', 'table', 'thead', 'tbody', 'tr'].includes(element.tagName.toLowerCase())) {\r\n            return value;\r\n        }\r\n        return 'mp-quote, -apple-system-font, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei UI\", \"Microsoft YaHei\", Arial, sans-serif';\r\n    },\r\n    'font-size': '17px',\r\n    'font-style': 'normal',\r\n    'font-weight': (__, _, element) => {\r\n        if (element.tagName === 'B' || element.tagName === 'STRONG' || element.tagName === 'TH') {\r\n            return '700';\r\n        }\r\n        return '400';\r\n    },\r\n    'text-decoration': (value, computedStyle, element) => {\r\n        if (computedStyle.getPropertyValue('text-decoration-line') === 'none' || element.tagName === 'A') {\r\n            return value;\r\n        }\r\n    },\r\n    'line-height': undefined,\r\n    'text-align': 'start',\r\n    'padding-top': '0px',\r\n    'padding-left': '0px',\r\n    'padding-right': '0px',\r\n    'padding-bottom': '0px',\r\n    'margin-top': '0px',\r\n    'margin-left': '0px',\r\n    'margin-right': '0px',\r\n    'margin-bottom': '0px',\r\n    'border-top-width': '0px',\r\n    'border-top-color': computeDefaultBorder('top'),\r\n    'border-top-style': computeDefaultBorder('top'),\r\n    'border-left-width': '0px',\r\n    'border-left-color': computeDefaultBorder('left'),\r\n    'border-left-style': computeDefaultBorder('left'),\r\n    'border-right-width': '0px',\r\n    'border-right-color': computeDefaultBorder('right'),\r\n    'border-right-style': computeDefaultBorder('right'),\r\n    'border-bottom-width': '0px',\r\n    'border-bottom-color': computeDefaultBorder('bottom'),\r\n    'border-bottom-style': computeDefaultBorder('bottom'),\r\n    'border-top-left-radius': '0px',\r\n    'border-top-right-radius': '0px',\r\n    'border-bottom-left-radius': '0px',\r\n    'border-bottom-right-radius': '0px',\r\n    'max-width': 'none',\r\n    'width': (value, _, element) => {\r\n        if (['table'].includes(element.tagName.toLowerCase())) {\r\n            return () => '100%';\r\n        }\r\n        return value;\r\n    },\r\n    'height': (value, _, element) => {\r\n        if (['th', 'td'].includes(element.tagName.toLowerCase())) {\r\n            return undefined;\r\n        }\r\n        return value;\r\n    },\r\n    'overflow-x': 'visible',\r\n    'overflow-y': 'visible',\r\n    'display': (__, _, element) => {\r\n        if (['div', 'article', 'section', 'blockquote', 'pre', 'table', 'ol', 'li', 'ul', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'hr', 'p'].includes(element.tagName.toLowerCase())) {\r\n            return 'block';\r\n        }\r\n        if (['a', 'br', 'code', 'em', 'span', 'strong'].includes(element.tagName.toLowerCase())) {\r\n            return 'inline';\r\n        }\r\n        if (['img'].includes(element.tagName.toLowerCase())) {\r\n            return 'inline-block';\r\n        }\r\n        if (['tr'].includes(element.tagName.toLowerCase())) {\r\n            return 'table-row';\r\n        }\r\n        if (['td', 'th'].includes(element.tagName.toLowerCase())) {\r\n            return 'table-cell';\r\n        }\r\n        if (['thead'].includes(element.tagName.toLowerCase())) {\r\n            return 'table-header-group';\r\n        }\r\n        if (['tbody'].includes(element.tagName.toLowerCase())) {\r\n            return 'table-row-group';\r\n        }\r\n\r\n        return undefined;\r\n    },\r\n    'tab-size': '8',\r\n    'white-space': 'normal',\r\n    'word-break': 'normal',\r\n    'border-collapse': () => {\r\n        return 'separate';\r\n    },\r\n    'table-layout': 'auto',\r\n    'fill': 'rgb(0, 0, 0)',\r\n    'stroke': 'none',\r\n    'fill-rule': 'nonzero',\r\n    'fill-opacity': '1',\r\n    'stroke-width': '1px',\r\n    'stroke-linecap': 'butt',\r\n    'stroke-linejoin': 'miter',\r\n    'stroke-miterlimit': '4',\r\n    'stroke-dasharray': 'none',\r\n    'stroke-dashoffset': '0px',\r\n};\r\n\r\n\r\nexport default function computedStyleToInlineStyle(element: HTMLElement) {\r\n    const computedStyle = getComputedStyle(element);\r\n\r\n    Array.from(computedStyle).forEach(property => {\r\n        if (Object.keys(STYLE_LIST).includes(property)) {\r\n\r\n            const value = computedStyle.getPropertyValue(property);\r\n            const style = STYLE_LIST[property];\r\n            if (style === undefined) {\r\n                element.style[property] = value;\r\n            } else if (typeof style === 'function') {\r\n                const styleValue = style(value, computedStyle, element);\r\n                if (styleValue !== value) {\r\n                    element.style[property] = typeof styleValue === 'function' ? styleValue() : value;\r\n                }\r\n            } else if (style !== value) {\r\n                element.style[property] = value;\r\n            }\r\n        }\r\n    });\r\n\r\n    Array.from(element.children).forEach(child => {\r\n        computedStyleToInlineStyle(child as HTMLElement);\r\n    });\r\n\r\n}\r\n\r\nexport function removeElementClass(element: HTMLElement) {\r\n    element.removeAttribute('class');\r\n\r\n    Array.from(element.children).forEach(child => {\r\n        removeElementClass(child as HTMLElement);\r\n    });\r\n}\r\n","import { request } from 'topwrite';\r\n\r\ninterface Article {\r\n    title: string;\r\n    author: string;\r\n    digest: string;\r\n    content: string;\r\n    content_source_url: string;\r\n    thumb_media_id: string;\r\n}\r\n\r\nconst req = request.create({\r\n    baseURL: 'https://www.topthink.com',\r\n});\r\n\r\nexport function saveDraft(article: Article, token: string) {\r\n    return req.post('/api/weaccount/draft', {\r\n        articles: [article]\r\n    }, {\r\n        headers: {\r\n            'Authorization': `Bearer ${token}`\r\n        }\r\n    });\r\n}\r\n\r\n\r\nexport async function saveImage(data: Blob | string, token: string) {\r\n    const formData = new FormData();\r\n    if (typeof data === 'string') {\r\n        formData.append('url', data);\r\n    } else {\r\n        formData.append('media', new File([data], 'image.png'));\r\n    }\r\n    const response = await req.post('/api/weaccount/media/image', formData, {\r\n        headers: {\r\n            'Authorization': `Bearer ${token}`\r\n        }\r\n    });\r\n\r\n    return response.data.url;\r\n}\r\n\r\nexport async function saveMaterial(data: Blob, token: string) {\r\n    const formData = new FormData();\r\n    formData.append('type', 'image');\r\n    formData.append('media', new File([data], 'image.png'));\r\n\r\n    const response = await req.post('/api/weaccount/material', formData, {\r\n        headers: {\r\n            'Authorization': `Bearer ${token}`\r\n        }\r\n    });\r\n\r\n    return response.data.media_id;\r\n}\r\n","export default __webpack_public_path__ + \"media/img.f44ba2c8.png\";","var _path;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nvar SvgCheck = function SvgCheck(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    className: \"check_svg__icon\",\n    viewBox: \"0 0 1024 1024\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 20,\n    height: 20\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M328 800q-3.008 0-4.992-.992-20-2.016-30.016-20L133.984 500.992q-8-15.008-4-31.008t18.496-24 30.496-3.488 24.992 18.496L336.96 693.984l491.008-492q11.008-12 28-12t28.512 11.488 11.488 28.512-12 28L355.968 788q-11.008 12-28 12z\"\n  })));\n};\nexport { SvgCheck as ReactComponent };\nexport default \"data:image/svg+xml;base64,PHN2ZyB0PSIxNjgwMTg4NDY0MTg5IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI3NDMiDQogICAgIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+DQogICAgPHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNMzI4IDgwMHEtMy4wMDggMC00Ljk5Mi0wLjk5Mi0yMC0yLjAxNi0zMC4wMTYtMjBsLTE1OS4wMDgtMjc4LjAxNnEtOC0xNS4wMDgtNC0zMS4wMDh0MTguNDk2LTI0IDMwLjQ5Ni0zLjQ4OCAyNC45OTIgMTguNDk2bDEzMi45OTIgMjMyLjk5Mkw4MjcuOTY4IDIwMS45ODRxMTEuMDA4LTEyIDI4LTEydDI4LjUxMiAxMS40ODggMTEuNDg4IDI4LjUxMi0xMiAyOGwtNTI4IDUzMC4wMTZxLTExLjAwOCAxMi0yOCAxMnoiDQogICAgICAgICAgcC1pZD0iMjc0NCI+PC9wYXRoPg0KPC9zdmc+DQo=\";","import { BaseConfig, Config, useBook } from 'topwrite';\r\nimport { Config as ConfigType } from './config';\r\n\r\ndeclare const PLUGIN_NAME: string;\r\n\r\ndeclare module 'topwrite' {\r\n    export interface HookContext {\r\n        getConfig(): BaseConfig<ConfigType>;\r\n    }\r\n}\r\n\r\nexport function getPluginConfig(config: Config): BaseConfig<ConfigType> {\r\n\r\n    const schema = require('../config.json');\r\n\r\n    return config.getPluginConfig(PLUGIN_NAME, schema);\r\n}\r\n\r\nexport default function useConfig() {\r\n    const { config } = useBook();\r\n\r\n    return getPluginConfig(config);\r\n};\r\n","import {\r\n    Form,\r\n    FormType,\r\n    Markdown,\r\n    Modal,\r\n    OverlayState,\r\n    styled,\r\n    useFile,\r\n    useOverlayState,\r\n    Toast,\r\n    request,\r\n} from 'topwrite';\r\nimport { useCallback, useMemo, useRef, useState } from 'react';\r\nimport posthtml from 'posthtml';\r\nimport computedStyleToInlineStyle, { removeElementClass } from '@/utils/computed-style-to-inline-style';\r\nimport base64ToBlob from '@/utils/base64-to-blob';\r\nimport { saveDraft, saveImage, saveMaterial } from '@/utils/api';\r\nimport parseAttrs from 'posthtml-attrs-parser';\r\nimport successBg from '../images/img.png';\r\nimport { ReactComponent as CheckIcon } from '../images/check.svg';\r\nimport useConfig from '@@/use-config';\r\n\r\nexport default function SyncModal({ state: props }: { state: OverlayState }) {\r\n\r\n    const file = useFile();\r\n\r\n    const ref = useRef<FormType>(null);\r\n    const htmlRef = useRef<HTMLDivElement>(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [success, setSuccess] = useState(false);\r\n    const [html, setHtml] = useState<string>();\r\n    const config = useConfig();\r\n\r\n    const { state, show } = useOverlayState({\r\n        onHide: () => {\r\n            setSuccess(false);\r\n            setHtml(undefined);\r\n        }\r\n    });\r\n\r\n    const onSubmit = useCallback(async ({ formData }) => {\r\n        try {\r\n            if (html) {\r\n                setLoading(true);\r\n                const result = await posthtml().use((tree) => {\r\n                    const promises: Promise<void>[] = [];\r\n                    tree.match({ tag: 'img' }, (img) => {\r\n                        promises.push(new Promise(async (resolve, reject) => {\r\n                            try {\r\n                                const attrs = parseAttrs(img.attrs);\r\n\r\n                                if (attrs.src) {\r\n                                    let data: Blob | string;\r\n                                    try {\r\n                                        const response = await request.get(attrs.src, {\r\n                                            responseType: 'blob'\r\n                                        });\r\n                                        data = response.data;\r\n                                    } catch (e: any) {\r\n                                        if (e.isAxiosError && e.response === undefined) {\r\n                                            data = attrs.src;\r\n                                        } else {\r\n                                            throw e;\r\n                                        }\r\n                                    }\r\n\r\n                                    attrs.src = await saveImage(data, config.getValue('api_token'));\r\n\r\n                                    img.attrs = attrs.compose();\r\n                                }\r\n                                resolve();\r\n                            } catch (e) {\r\n                                reject(e);\r\n                            }\r\n                        }));\r\n                        return img;\r\n                    });\r\n\r\n                    return Promise.all(promises).then(() => tree);\r\n                }).process(html);\r\n\r\n                const cover = await saveMaterial(base64ToBlob(formData.cover), config.getValue('api_token'));\r\n\r\n                await saveDraft({\r\n                    title: formData.title,\r\n                    author: formData.author,\r\n                    digest: formData.digest,\r\n                    content: result.html,\r\n                    content_source_url: formData.content_source_url,\r\n                    thumb_media_id: cover\r\n                }, config.getValue('api_token'));\r\n                setSuccess(true);\r\n            }\r\n        } catch (e: any) {\r\n            if (e.isAxiosError) {\r\n                Toast.error(e.response.data);\r\n            } else {\r\n                Toast.error(e.message);\r\n            }\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [html, setLoading, props.onHide, setSuccess]);\r\n\r\n    const uiSchema = useMemo(() => ({\r\n        cover: {\r\n            'ui:widget': 'upload',\r\n            'ui:options': {\r\n                async onUpload(file: File) {\r\n                    return new Promise((resolve) => {\r\n                        const reader = new FileReader();\r\n                        reader.onloadend = function() {\r\n                            resolve(reader.result);\r\n                        };\r\n                        reader.readAsDataURL(file);\r\n                    });\r\n                }\r\n            }\r\n        },\r\n        title: {\r\n            'ui:placeholder': '请输入文章标题'\r\n        },\r\n        author: {\r\n            'ui:placeholder': '请输入文章作者'\r\n        },\r\n        digest: {\r\n            'ui:placeholder': '选填',\r\n            'ui:widget': 'textarea'\r\n        },\r\n        content_source_url: {\r\n            'ui:placeholder': '选填，请输入原文链接'\r\n        }\r\n    }), []);\r\n\r\n    return <>\r\n        <Modal\r\n            {...props}\r\n            scrollable\r\n            title={'内容预览'}\r\n            okText={'同步'}\r\n            onEntered={() => {\r\n                if (htmlRef.current) {\r\n                    const article = htmlRef.current.querySelector('article');\r\n                    if (article) {\r\n                        computedStyleToInlineStyle(article);\r\n                        //去除默认样式\r\n                        removeElementClass(article);\r\n                    }\r\n\r\n                    setHtml(htmlRef.current.innerHTML);\r\n                }\r\n            }}\r\n            onOk={(e) => {\r\n                if (!config.getValue('api_token')) {\r\n                    e.preventDefault();\r\n                    Toast.error('插件所需的API令牌尚未配置');\r\n                } else {\r\n                    show();\r\n                }\r\n            }}\r\n        >\r\n            <Container ref={htmlRef}>\r\n                <Markdown>{file.content.toString()}</Markdown>\r\n            </Container>\r\n        </Modal>\r\n        <Modal\r\n            {...state}\r\n            title='同步到微信公众号'\r\n            size='lg'\r\n            onOk={(e) => {\r\n                e.preventDefault();\r\n                if (success) {\r\n                    window.open('https://mp.weixin.qq.com');\r\n                } else {\r\n                    ref.current?.submit();\r\n                }\r\n            }}\r\n            okText={success ? '去微信公众号' : undefined}\r\n            cancelText={success ? '知道了' : undefined}\r\n            confirmLoading={loading}\r\n        >\r\n            {success ? <>\r\n                <img className='w-100' src={successBg} />\r\n                <p className='mt-3 mb-0 d-flex align-items-center fs-5 text-muted'>\r\n                    <CheckIcon className='text-success me-2' />\r\n                    图文已同步至微信公众号平台「 内容与互动 」- 「 草稿箱 」\r\n                </p>\r\n            </> : <Form\r\n                onSubmit={onSubmit}\r\n                ref={ref}\r\n                formContext={{ layout: 'horizontal' }}\r\n                schema={{\r\n                    type: 'object',\r\n                    properties: {\r\n                        cover: {\r\n                            type: 'string',\r\n                            title: '封面',\r\n                        },\r\n                        title: {\r\n                            type: 'string',\r\n                            title: '标题'\r\n                        },\r\n                        author: {\r\n                            type: 'string',\r\n                            title: '作者'\r\n                        },\r\n                        digest: {\r\n                            type: 'string',\r\n                            title: '摘要'\r\n                        },\r\n                        content_source_url: {\r\n                            type: 'string',\r\n                            title: '原文链接'\r\n                        }\r\n                    },\r\n                    required: ['cover', 'title']\r\n                }}\r\n                uiSchema={uiSchema}\r\n            />}\r\n        </Modal>\r\n    </>;\r\n}\r\n\r\nconst Container = styled.div`\r\n  color: rgb(51, 51, 51);\r\n  border-color: transparent;\r\n  font-size: 17px;\r\n  min-height: 150px;\r\n  font-family: \"mp-quote\", -apple-system-font, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei UI\", \"Microsoft YaHei\", Arial, sans-serif;\r\n\r\n  * {\r\n    margin: 0;\r\n    padding: 0\r\n  }\r\n`;\r\n","export default function base64ToBlob(base64: string) {\r\n    const arr = base64.split(',');\r\n    const mime = arr[0].match(/:(.*?);/)![1];\r\n    const bstr = atob(arr[1]);\r\n    let n = bstr.length;\r\n    const u8arr = new Uint8Array(n);\r\n    while (n--) {\r\n        u8arr[n] = bstr.charCodeAt(n);\r\n    }\r\n    return new Blob([u8arr], {\r\n        type: mime,\r\n    });\r\n}\r\n","import { createMarkdownPlatePlugin, useOverlayState } from 'topwrite';\r\nimport { ReactComponent as Icon } from '../images/icon.svg';\r\nimport SyncModal from '@/components/sync-modal';\r\n\r\nconst plugin = createMarkdownPlatePlugin({\r\n    tools() {\r\n        return {\r\n            '-10:3': ({ Component }) => {\r\n\r\n                const { state, show } = useOverlayState();\r\n\r\n                return <>\r\n                    <Component title={'同步到微信公众号'} handler={show}>\r\n                        <Icon />\r\n                    </Component>\r\n                    <SyncModal state={state} />\r\n                </>;\r\n            }\r\n        };\r\n    }\r\n});\r\n\r\nexport default plugin;\r\n","import { GetComponentProps, useActions } from 'topwrite';\r\nimport { useEffect } from 'react';\r\nimport plugin from '@/components/plugin';\r\n\r\nexport default function Activate({ children }: GetComponentProps<'activate'>) {\r\n\r\n    const { addPlugin, removePlugin } = useActions('editor');\r\n\r\n    useEffect(() => {\r\n        addPlugin(plugin);\r\n        return () => {\r\n            removePlugin(plugin);\r\n        };\r\n    }, []);\r\n\r\n    return children;\r\n}\r\n"],"names":["_path","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","SvgIcon","props","className","viewBox","xmlns","width","height","d","fill","computeDefaultBorder","direction","value","computedStyle","getPropertyValue","STYLE_LIST","undefined","color","_","__","element","tagName","font-family","includes","toLowerCase","font-weight","text-decoration","display","border-collapse","computedStyleToInlineStyle","getComputedStyle","Array","from","forEach","property","keys","style","styleValue","children","child","removeElementClass","removeAttribute","req","request","baseURL","SvgCheck","useConfig","config","useBook","schema","require","getPluginConfig","PLUGIN_NAME","SyncModal","_ref","state","file","useFile","ref","useRef","htmlRef","loading","setLoading","useState","success","setSuccess","html","setHtml","show","useOverlayState","onHide","onSubmit","useCallback","async","formData","_ref2","result","posthtml","use","tree","promises","match","tag","img","push","Promise","resolve","reject","attrs","parseAttrs","src","data","responseType","e","isAxiosError","response","token","FormData","append","File","post","headers","url","saveImage","getValue","compose","all","then","process","cover","media_id","saveMaterial","base64","arr","split","mime","bstr","atob","n","u8arr","Uint8Array","charCodeAt","Blob","type","base64ToBlob","article","title","author","digest","content","content_source_url","thumb_media_id","articles","Toast","message","uiSchema","useMemo","onUpload","reader","FileReader","onloadend","readAsDataURL","_jsxs","_Fragment","_jsx","Modal","scrollable","okText","onEntered","current","querySelector","innerHTML","onOk","preventDefault","Container","Markdown","toString","size","_ref$current","window","open","submit","cancelText","confirmLoading","successBg","CheckIcon","Form","formContext","layout","properties","required","styled","createMarkdownPlatePlugin","tools","Component","handler","Icon","Activate","addPlugin","removePlugin","useActions","useEffect","plugin"],"sourceRoot":""}